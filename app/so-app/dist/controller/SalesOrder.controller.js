sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("soapp.controller.SalesOrder",{onInit:function(){const e=new sap.ui.model.json.JSONModel({rows:[]});this.getView().setModel(e,"materials")},onNavBackToSoOV:function(){const e=this.getOwnerComponent().getRouter();e.navTo("RouteHomee")},onSaveOrder:function(){const e=this.byId("_IDGenInput");const t=e.getValue().trim();const s=this.byId("CustomerInput");const a=s.getValue().trim();const o=this.byId("MaterialInput");const n=o.getValue().trim();let l=false;if(!t){e.setValueState("Error");e.setValueStateText("Title is required");l=true}if(!a){s.setValueState("Error");s.setValueStateText("Customer is required");l=true}if(!n){o.setValueState("Error");o.setValueStateText("Material is required");l=true}if(l){sap.m.MessageToast.show("Please fill in all required fields.");return}const i=crypto.randomUUID();this.byId("_IDGenInput3").setValue(i);this.byId("_IDGenInput").setEditable(false);this.byId("CustomerInput").setEditable(false);this.byId("MaterialInput").setEditable(false);this.byId("_IDGenInput4").setEditable(false);this.byId("_IDGenButton5").setVisible(false);const r=this.getView().getModel();var u=r.bindList("/salesOrders");const c={title:this.byId("_IDGenInput").getValue(),customer:this.byId("CustomerInput").getValue(),material:this.byId("MaterialInput").getValue(),salesOrderID:this.byId("_IDGenInput3").getValue()};u.create(c).created().then(function(){sap.m.MessageToast.show("Sales Order saved successfully")},function(e){sap.m.MessageToast.show("Error saving Sales Order");console.error(e)});var d=r.bindList("/materials");const p={salesOrder:this.byId("_IDGenInput3").getValue(),productID:this.byId("_IDGenText17").getValue(),itemID:this.byId("_IDGenText16").getValue(),productDescription:this.byId("_IDGenText18").getValue(),status:this.byId("_IDGenText19").getValue(),inputQty:this.byId("_IDGenInput4").getValue()};d.create(p).created().then(function(){sap.m.MessageToast.show("Sales Order Items saved successfully")},function(e){sap.m.MessageToast.show("Error saving Sales Order Items");console.error(e)})},onValueHelpRequestMaterial(e){if(!this._oValueHelpDialog){this._oValueHelpDialog=new sap.m.Dialog({title:"Select Material",content:[new sap.m.Table({id:this.createId("materialsTable"),mode:"SingleSelectMaster",growing:true,growingThreshold:50,columns:[new sap.m.Column({header:new sap.m.Label({text:"Material Number"})}),new sap.m.Column({header:new sap.m.Label({text:"Material Description"})}),new sap.m.Column({header:new sap.m.Label({text:"Status"})})],items:{path:"/c4cMaterials",parameters:{$count:true},template:new sap.m.ColumnListItem({type:"Active",cells:[new sap.m.Text({text:"{ProductID}"}),new sap.m.Text({text:"{Description}"}),new sap.m.Text({text:"{StatusText}"})]}),events:{dataReceived:e=>{const t=e.getSource();const s=this.byId("materialsTable");const a=s.getItems();const o=e.getParameter("data");console.log("Total items received:",a.length);console.log("Total count from server:",o?.__count||"N/A");if(a.length===0){sap.m.MessageBox.warning("No Materials found.")}}}}})],beginButton:new sap.m.Button({text:"Confirm",press:e=>{const t=this.byId("materialsTable");const s=t.getSelectedItem();if(s){const e=s.getCells()[0].getText();const t=s.getCells()[1].getText();this.byId("MaterialInput").setValue(e);this.byId("_IDGenInput2").setValue(t);this.getView().getModel("c4c").setProperty("/ProductID",e);this.updateSimulateButtonState();this._oValueHelpDialog.close()}}}),endButton:new sap.m.Button({text:"Cancel",press:()=>{this._oValueHelpDialog.close()}})});var t=this.getOwnerComponent().getModel();this._oValueHelpDialog.setModel(t);this.getView().addDependent(this._oValueHelpDialog)}this._oValueHelpDialog.open()},onValueHelpRequestCust(e){if(!this._oValueHelpCustDialog){this._oValueHelpCustDialog=new sap.m.Dialog({title:"Select Customer",content:[new sap.m.Table({id:this.createId("customersTable"),mode:"SingleSelectMaster",growing:true,growingThreshold:50,columns:[new sap.m.Column({header:new sap.m.Label({text:"Customer ID"})}),new sap.m.Column({header:new sap.m.Label({text:"Customer Name"})}),new sap.m.Column({header:new sap.m.Label({text:"Customer Status"})}),new sap.m.Column({header:new sap.m.Label({text:"Type"})})],items:{path:"/c4cCustomer",parameters:{$count:true},template:new sap.m.ColumnListItem({type:"Active",cells:[new sap.m.Text({text:"{AccountID}"}),new sap.m.Text({text:"{BusinessPartnerFormattedName}"}),new sap.m.Text({text:"{LifeCycleStatusCodeText}"}),new sap.m.Text({text:"RoleCodeText"})]}),events:{dataReceived:e=>{const t=e.getSource();const s=this.byId("customersTable");const a=s.getItems();const o=e.getParameter("data");console.log("Total items received:",a.length);console.log("Total count from server:",o?.__count||"N/A");if(a.length===0){sap.m.MessageBox.warning("No Customers found.")}}}}})],beginButton:new sap.m.Button({text:"Submit",press:e=>{const t=this.byId("customersTable");const s=t.getSelectedItem();if(s){const e=s.getCells()[0].getText();const t=s.getCells()[1].getText();this.byId("CustomerInput").setValue(e);this.byId("_IDGenInput1").setValue(t);this.getView().getModel("c4c").setProperty("/AccountID",e);this.updateSimulateButtonState();this._oValueHelpCustDialog.close()}}}),endButton:new sap.m.Button({text:"Cancel",press:()=>{this._oValueHelpCustDialog.close()}})});var t=this.getOwnerComponent().getModel();this._oValueHelpCustDialog.setModel(t);this.getView().addDependent(this._oValueHelpCustDialog)}this._oValueHelpCustDialog.open()},onSetMaterial:function(){const e=this.byId("_IDGenTable1");const t=e.getBinding("items");const s=t.getLength();const a=this.byId("MaterialInput").getValue();const o=this.byId("_IDGenInput2").getValue();const n="Active";const l={itemID:s+1,productID:a,productDescription:o,status:n};t.create(l).created().then(()=>{sap.m.MessageToast.show("Row created successfully");this.byId("MaterialInput").setValue("")}).catch(e=>{sap.m.MessageToast.show("Failed to create row");console.error(e)})}})});
//# sourceMappingURL=SalesOrder.controller.js.map